#include "rendertest.h"

#include <vector>

using namespace std;

CPPUNIT_TEST_SUITE_REGISTRATION(RenderTest);

void RenderTest::testParseObjectFile()
{
	vector<ObjectLoad::Vertex> outputVertices = {{0.000000, -1.000000, 0.000000},
												 {0.000000, 1.000000, 0.000000},
												 {0.276388, 0.447220, -0.850649},
												 {0.723607, -0.447220, 0.525725},
												 {0.000000, 1.000000, 0.000000},
												 {0.000000, 1.000000, 0.000000},
												 {0.000000, -1.000000, 0.000000},
												 {0.894426, 0.447216, 0.000000},
												 {-0.723607, 0.447220, -0.525725},
												 {0.000000, -1.000000, 0.000000},
												 {-0.723607, 0.447220, -0.525725},
												 {0.723607, -0.447220, 0.525725},
												 {0.000000, -1.000000, 0.000000},
												 {0.000000, -1.000000, 0.000000},
												 {0.723607, -0.447220, -0.525725},
												 {0.723607, -0.447220, 0.525725},
												 {0.276388, 0.447220, 0.850649},
												 {-0.894426, -0.447216, 0.000000},
												 {-0.276388, -0.447220, 0.850649},
												 {0.894426, 0.447216, 0.000000},
												 {0.723607, -0.447220, -0.525725}};

	vector<ObjectLoad::Text> outputTextCoords = {{0.205825, 0.796643},
												{0.294076, 0.836727},
												{0.194767, 0.892391},
												{0.392861, 0.882659},
												{0.294076, 0.836727},
												{0.392861, 0.758866},
												{0.205825, 0.796643},
												{0.194767, 0.892391},
												{0.110211, 0.815955},
												{0.205825, 0.796643},
												{0.110211, 0.815955},
												{0.158472, 0.712693},
												{0.205825, 0.796643},
												{0.158472, 0.712693},
												{0.271600, 0.725450},
												{0.230581, 0.341262},
												{0.310841, 0.381155},
												{0.221892, 0.435870},
												{0.208124, 0.214326},
												{0.310841, 0.381155},
												{0.392861, 0.882659}};

	vector<ObjectLoad::Normal> outputNormals = {{0.102381, -0.943523, 0.315090},
												{0.102381, -0.943523, 0.315090},
												{0.102381, -0.943523, 0.315090},
												{0.700224, -0.661699, 0.268032},
												{0.700224, -0.661699, 0.268032},
												{0.700224, -0.661699, 0.268032},
												{-0.268034, -0.943523, 0.194736},
												{-0.268034, -0.943523, 0.194736},
												{-0.268034, -0.943523, 0.194736},
												{-0.268034, -0.943523, -0.194737},
												{-0.268034, -0.943523, -0.194737},
												{-0.268034, -0.943523, -0.194737},
												{0.102381, -0.943523, -0.315090},
												{0.102381, -0.943523, -0.315090},
												{0.102381, -0.943523, -0.315090},
												{0.904989, -0.330385, 0.268032},
												{0.904989, -0.330385, 0.268032},
												{0.904989, -0.330385, 0.268032},
												{0.024747, -0.330386, 0.943521},
												{0.024747, -0.330386, 0.943521},
												{0.024747, -0.330386, 0.943521}};
	vector<ObjectLoad::Vertex> vertices;
	vector<ObjectLoad::Text> textCoords;
	vector<ObjectLoad::Normal> normals;
	ObjectLoad::GetBufferData("/../Render/test.obj", vertices, textCoords, normals);
	CPPUNIT_ASSERT(std::equal(vertices.begin(), vertices.end(), outputVertices.begin()));
	CPPUNIT_ASSERT(std::equal(textCoords.begin(), textCoords.end(), outputTextCoords.begin()));
	CPPUNIT_ASSERT(std::equal(normals.begin(), normals.end(), outputNormals.begin()));
}
